{% extends './home.html' %}
{% load static %}

    <!-- Close Header -->

    <!-- Modal -->
    

    {% block content %} 

    <!-- Open Content -->
    <section class="bg-white">
        <div class="container mb-5 shadow-lg  mt-5 bg-body rounded">
            <div class="row ">
                <div class="col-md-6 mt-5">
                    <div class="card mb-3 ">
                        <div class="zoom-image" data-image="{{varient.image1.url}}">
                        <img class="card-img img-fluid"style="height: 20em; width: 40em;" id="main_image" src="{{varient.image1.url}}"  alt="" id="">
                    </div>
                    </div>
                   
                    <div class="row">
                        <!--Start Controls-->
                        <div class="col-1 align-self-center">
                            <a href="#multi-item-example" role="button" data-bs-slide="prev">
                                
                                <span class="sr-only">Previous</span>
                            </a>
                        </div>
                        <!--End Controls-->
                        <!--Start Carousel Wrapper-->
                        <div id="multi-item-example" class="col-10 carousel slide carousel-multi-item" data-bs-ride="carousel">
                            <!--Start Slides-->
                            <div class="carousel-inner product-links-wap" role="listbox">

                                <!--First slide-->
                                <div class="carousel-item active  mb-5">
                                    <div class="row">
                                     
                                        <div class="col-4">
                                           
                                                <img  class="card-img img-fluid" style="height: 5rem; width: 8rem;"  onclick="change_image(this)" src="{{varient.image1.url}}" style="height: 18vh" alt="">
                                       
                                        </div>
                                        <div class="col-4">
                                           
                                                <img class="card-img img-fluid" style="height: 5rem; width: 8rem;"   onclick="change_image(this)" src="{{varient.image2.url}}" style="height: 18vh;" alt="">
                                        
                                        </div>
                                        <div class="col-4">
                                           
                                                <img class="card-img img-fluid" style="height: 5rem; width: 8rem;"  onclick="change_image(this)" src="{{varient.image3.url}}" style="height: 18vh;" alt="">
                                          
                                        </div>
                                      
                                        
                                        
                                    </div>
                                </div>
                               
                            </div>
                           
                        </div>
                        
                    </div>
                </div>
                <!-- col end -->
                <div class="col-md-6 mt-5">
                    <div class="card ">
                        <div class="card-body">
                            <h1 class="h2">{{varient.vehicle_id.vehicle_name}}</h1>
                            <p class="h3 py-2"></p>
                       
                            <ul class="list-inline">
                                <li class="list-inline-item">
                                    <h6>NAME:</h6>
                                    

                                </li>
                                <li class="list-inline-item">
                                    <p class="text-muted"><strong>{{varient.vehicle_id.vehicle_name}}</strong></p>
                                    
                                </li>
                            </ul>
                            <ul class="list-inline">
                                <li class="list-inline-item">
                                
                                    <h6>CATEGORY:</h6>

                                </li>
                                <li class="list-inline-item">
                              
                                    <p class="text-muted"><strong>{{varient.vehicle_id.category.category_name}}</strong></p>
                                </li>
                            </ul>
                            <ul class="list-inline">
                                <li class="list-inline-item">
                                    <h6>Speed :</h6>
                                </li>
                                <li class="list-inline-item">
                                    <p class="text-muted"><strong>{{varient.vehicle_id.top_speed}}Km/hr</strong></p>
                                </li> <br>
                                <li class="list-inline-item">
                                    <h6>Range :</h6>
                                </li>
                                <li class="list-inline-item">
                                    <p class="text-muted"><strong>{{varient.vehicle_id.range}}</strong></p>
                                </li> <br>
                                <li class="list-inline-item">
                                    <h6>Color :</h6>
                                </li>
                                <li class="list-inline-item">
                                    <p class="text-muted"><strong>{{varient.color}}</strong></p>
                                </li> <br>
                                
                                <li class="list-inline-item">
                                    <h6>Price :</h6>
                                </li>
                                <li class="list-inline-item">
                                    <p class="text-muted"><strong>{{varient.price}}</strong></p>
                                </li> <br>
                                {% if varient.remaining != 0 %}
                                <li class="list-inline-item">
                                    <h6>In Stock</h6> 
                                </li>
                               
                                {% endif %}
                                <br>
                               
                               
                            <!-- </ul>

                             <h6>Specification:</h6> 
                             <ul class="list-unstyled pb-3">
                                <li>Lorem ipsum dolor sit</li>
                                <li>Amet, consectetur</li>
                                <li>Adipiscing elit,set</li>
                                <li>Duis aute irure</li>
                                <li>Ut enim ad minim</li>
                                <li>Dolore magna aliqua</li>
                                <li>Excepteur sint</li>
                            </ul>  -->

                          
                              
                               
                            {% if varient.remaining != 0 %}
                                   
                            <button type="submit" class="btn btn-success btn-lg " name="submit" value="addtocard"><a href="{% url 'Cartapp:add_to_cart' varient.id %}" style="text-decoration: none; color: #fff;">ADD TO CART</a></button>
                            {%else%}
                            <p style="color: red  ; font-weight: 400 !important; font-size: small;">OUT OF STOCK</p>
                            {%endif%}
                                
                               
                       

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Close Content -->

    <!-- Start Article -->
    <section class="">
        <div class="container  shadow p-3 mb-5 bg-white rounded mt-5">
            <div class="row text-center py-3">
                <div class="col-lg-6 m-auto">
                    <h1 class="h1" style="color: rgb(32, 30, 30); font-family: IM FELL Great Primer SC;" >Varients</h1>
                    <p>
                        <!-- Reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                        Excepteur sint occaecat cupidatat non proident. -->
                    </p>
                </div>
            </div>
            <div class="row">

                {% for items in all_varient %}

                <div class="col-12 col-md-4 mb-4">
                    <div class="card mb-4 product-wap rounded-0">
                        <div class="card rounded-0">
                            <img class="card-img rounded-0 img-fluid" style="height: 15rem;"  src="{{items.image1.url}}">
                            <div class="card-img-overlay rounded-0 product-overlay d-flex align-items-center justify-content-center">
                                <ul class="list-unstyled">
                                  
                                    
                                    <li><a class="btn btn-success text-white mt-2" href="{% url 'user:variant_detail' items.pk %}"><i class="far fa-eye"></i></a></li>
                                    {% if items.remaining != 0 %}
                                    <li><a class="btn btn-success text-white mt-2" href="{% url 'Cartapp:add_to_cart' items.id %}"><i class="fas fa-cart-plus"></i></a></li>
                                    {% endif %}
                                </ul>
                            </div>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title text-center">{{items.vehicle_id.vehicle_name}}</h5> <br>
                            <p class="card-text">{{items.color}}</p>
                            {% if items.remaining == 0 %}
                            
                            <p style="color: red  ; font-weight: 400 !important; font-size: small;">OUT OF STOCK</p>
                            {% else%}
                        
                             <p class="card-text" style="font-weight: 400 !important; font-size: small;">IN STOCK</p>
                             {% endif %}
                            <p class="card-text">{{items.price}}</p>
                            <p class="card-text"> </p>
                          
                            <p class="text-center mb-0"></p>
                            <p class="text-center"><a class="btn   btn-outline-warning "  href="{% url 'user:variant_detail' items.pk %}">Explore Now</a></p>
                        </div>
                    </div>         
                </div>
                {% endfor %}
            </div>
        </div>
    </section>


   
    <!-- End Article -->

    


  


    <script>
        function change_image(image_data){
        document.getElementById('main_image').src = image_data.src
    }


    document.addEventListener("DOMContentLoaded", function(event) {
        });
            jQuery(document).ready(function ($) {
              $('.zoom-image img').click(function (event) {
                var ix = $(this).offset().left;
                var iy = $(this).offset().top;
                console.log(ix + '-' + iy);
                var mx = event.pageX;
                var my = event.pageY;
                console.log(mx + '-' + my);
              })
              $('.zoom-image img').hover(function () {
                var img = $(this).attr('src');
              $(this).after("<div class='hover-image' style='background-image: url(" + img + "); background-size: 300px;'></div>");
              $(this).mousemove(function (event) {
              // Mouse Position
                var mx = event.pageX;
                var my = event.pageY;
              // Image Position
                var ix = $(this).offset().left;
                var iy = $(this).offset().top;
              // Mouse Position Relavtive to Image
                var x = mx - (ix);
                var y = my - (iy);
              // Image Height and Width
                var w = $(this).width();
                var h = $(this).height();
              // Mouse Position Relative to Image, in %
                var xp = (-x / w) * -100;
                var yp = (-y / h) * -100;
              $(this).parent().find('.hover-image').attr('style',
                "background-image: url(" + img + "); background-size: 1000px; background-repeat: no-repeat; background-position: " + xp + "% " + yp + "%; top: " + y + "px; left: " + x + "px;");
            });
          }, function () {
        $(this).parent().find('.hover-image').remove();
      });
    });
    </script>
    {% endblock  %}

  
  